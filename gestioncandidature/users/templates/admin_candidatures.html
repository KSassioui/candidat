{% load static %}

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Gestion des Candidatures</title>

    <style>
   :root {
  --primary-color: #6B46C1;
  --primary-dark: #553C9A;
  --primary-light: #9F7AEA;
  --secondary-color: #4A5568;
  --bg-light: #F7FAFC;
  --text-dark: #2D3748;
  --text-light: #A0AEC0;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  color: var(--text-dark);
  background-color: var(--bg-light);
  margin: 0;
}

      .container-offre{

      margin-top:120px;

      }

      .bg {
        margin-top: 20px;
       }

        
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: radial-gradient(circle at bottom, #4e2c92 0%, #1b0035 20%, #0e001f 100%);
            border-radius: 15px;
            padding: 10px 20px;
            max-width: 1160px;
            margin: 0 auto;
            left: 150px;
            top:20px;
        
        }

        .nav-links {
          display: flex;
        gap: 30px;
        margin-right: 80px;
         }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-size: 16px;
        }
        
        .left-section {
            display: flex;
            align-items: center;
        }
        
        .logo {
            color: white;
            font-size: 24px;
            font-weight: bold;
            margin-right: 40px;
        }
        
        .logo-icon {
            height: 30px;
            vertical-align: middle;
        }
        
        .nav-icons {
            display: flex;
            gap: 20px;
        }
        
        .icon-button {
            background-color: transparent;
            border: 1px solid #444;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .icon-button img {
            width: 20px;
            height: 20px;
            filter: invert(1);
        }
        
        .right-section {
            display: flex;
            gap: 15px;
        }
        
     
        
        .consult-btn {
            background-color: #6f5cff;
            color: rgb(255, 255, 255);
            border: none;
            border-radius: 25px;
            padding: 10px 25px;
            font-size: 16px;
            cursor: pointer;
            font-weight: 500;
        }

.nav-links a,
.signup a {
  text-decoration: none;
  color: white;
  font-size: 16px;
  transition: color 0.3s ease;
}

.nav-links a:hover,
.signup a:hover {
  color: #ccc;
}

.signup a {
  font-weight: 500;
  margin-right: 100px;
}
           


     main {
    padding-top: 5px; 
     padding-bottom: 20px; 
     border-radius: 12px;/* Ajustement pour éviter la superposition avec le header */
    width: 90%;
    max-width: 1200px;
    margin: auto;
    background: radial-gradient(circle at bottom, #4e2c92 0%, #1b0035 20%, #0e001f 100%);
        .content {
            max-width: 1200px;
            margin: auto;
            padding: 30px;
            color: white;
        }}

        h2{
            margin-left: 40px;
            color: white;
        }

        table {
            width: 95%;
            max-width: 1200px;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 15px;
            text-align: left;
            background-color: #dddcde;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            margin: auto;
            
        }

        thead {
            background: radial-gradient(circle at bottom, #8a4fff 0%, #1b00352a 40%, #0e001f18 100%);
            color: #fff;
        }

        th, td {
            padding: 15px;
            border: 1px solid rgba(108, 89, 132, 0.736);
            color: rgb(13, 12, 12);
        }

        tr:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        td a {
            color: #d1b3ff;
            text-decoration: none;
        }

        td a:hover {
            text-decoration: underline;
        }

        select, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
            resize: vertical;
            font-size: 14px;
        }

        button {
            background-color: #5a189a;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #3c096c;
        }

        @media (max-width: 768px) {
            .nav-links, .signup {
                display: none;
            }

            .navbar {
                flex-direction: column;
                align-items: flex-start;
            }

            table, thead, tbody, th, td, tr {
                display: block;
            }

            tr {
                margin-bottom: 20px;
            }

            th {
                background-color: transparent;
                color: #d1b3ff;
                font-size: 14px;
            }

            td {
                border: none;
                position: relative;
                padding-left: 50%;
            }

            td::before {
                position: absolute;
                top: 15px;
                left: 15px;
                width: 45%;
                white-space: nowrap;
                font-weight: bold;
                color: #ccc;
            }

            td:nth-of-type(1)::before { content: "Candidat"; }
            td:nth-of-type(2)::before { content: "Offre"; }
            td:nth-of-type(3)::before { content: "CV"; }
            td:nth-of-type(4)::before { content: "Lettre de Motivation"; }
            td:nth-of-type(5)::before { content: "Statut"; }
            td:nth-of-type(6)::before { content: "Commentaire"; }
            td:nth-of-type(7)::before { content: "Actions"; }
        }







        
    </style>
</head>

<body>
  <section class="bg">
   <div class="container">
    <header class="navbar">
        <div class="logo"> 
            <img src="{% static 'images/image.png' %}" alt="HireFlex logo" class="logo-icon">
           
        </div>
        <nav class="nav-links">
            <a href="{% url 'admin_dashboard' %}">Accueil</a>
            <a href="{% url 'admin_dashboard2' %}">Tableau de bord</a>
            <a href="{% url 'admin_utilisateurs' %}">Utilisateurs</a>
            <a href="{% url 'admin_candidatures' %}">Candidatures</a>
            <a href="{% url 'admin_offres' %}">Offres</a>
            
            <a href="{% url 'admin_notifications' %}">Notifications</a>
        </nav>
                   <div class="right-section">
           <button class="consult-btn"   onclick="window.location.href='{% url 'logout' %}'">Déconnexion</button>
       </div>
</section>



        <main style="margin-top: 40px;">
            <!--<div class="content">  -->
                <h2>Gestion des Candidatures</h2>

                <table>
                    <thead>
                        <tr>
                            <th>Candidat</th>
                            <th>Offre</th>
                            <th>CV</th>
                            <th>Lettre de Motivation</th>
                            <th>Statut</th>
                            <th>Commentaire</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for candidature in candidatures %}
                        <tr>
                            <form method="post">
                                {% csrf_token %}
                                <input type="hidden" name="candidature_id" value="{{ candidature.id }}">
                                <td>{{ candidature.candidat.username }}</td>
                                <td>{{ candidature.offre.titre }}</td>
                                <td>
                                    {% if candidature.cv %}
                                        <a style="color: #0e001f;" href="{{ candidature.cv.url }}" download>Télécharger le CV</a>
                                    {% else %}
                                        Aucun CV
                                    {% endif %}
                                </td>
                                <td>
                                    {% if candidature.lettre_motivation %}
                                        <a  style="color: #0e001f;" href="{{ candidature.lettre_motivation.url }}" download>Télécharger la Lettre</a>
                                    {% else %}
                                        Aucune Lettre
                                    {% endif %}
                                </td>
                                <td>
                                    <select name="statut">
                                        <option value="En attente" {% if candidature.statut == "En attente" %}selected{% endif %}>En attente</option>
                                        <option value="Acceptée" {% if candidature.statut == "Acceptée" %}selected{% endif %}>Acceptée</option>
                                        <option value="Refusée" {% if candidature.statut == "Refusée" %}selected{% endif %}>Refusée</option>
                                    </select>
                                </td>
                                <td>
                                    <select onchange="document.getElementById('commentaire_{{ candidature.id }}').value = this.value;">
                                        <option value="">--Choisir un commentaire--</option>
                                        <option value="Très bon candidat">Très bon candidat</option>
                                        <option value="Manque d'expérience">Manque d'expérience</option>
                                        <option value="Demande un grand salaire">Demande un grand salaire</option>
                                        <option value="">Autre...</option>
                                    </select>
                                    <br>
                                    <textarea name="commentaire" id="commentaire_{{ candidature.id }}" rows="3" cols="30">{{ candidature.commentaire }}</textarea>
                                </td>
                                <td>
                                    <button type="submit">Mettre à jour</button>
                                </td>
                            </form>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            <!--</div> -->
        </main>
    </section>
</body>
</html>
